{"version":3,"file":"random-points.cjs","sources":["webpack://random-points-generator/webpack/runtime/compat_get_default_export","webpack://random-points-generator/webpack/runtime/define_property_getters","webpack://random-points-generator/webpack/runtime/has_own_property","webpack://random-points-generator/webpack/runtime/make_namespace_object","webpack://random-points-generator/./src/random-points.ts"],"sourcesContent":["// getDefaultExport function for compatibility with non-ESM modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};\n","__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n        if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n            Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n        }\n    }\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import turf from './turf';\n\nconst DEFAULT_NUMBER = 10;\n\nconst randomPoints = (n: number, bbox?: GeoJSON.BBox) => {\n  const count = n || DEFAULT_NUMBER;\n  return turf.randomPoint(count, {\n    bbox,\n  });\n};\n\nconst randomPointsFromGeoJSON = (\n  input: number,\n  { features, unkink }: { features: GeoJSON.FeatureCollection; unkink: boolean }\n) => {\n  let fc;\n  if (unkink) {\n    // @ts-expect-error TODO: fix this\n    fc = turf.unkinkPolygon(features);\n  } else {\n    fc = features;\n  }\n\n  const ori = input || DEFAULT_NUMBER;\n  const randomFeatures: GeoJSON.Feature<\n    GeoJSON.Point,\n    GeoJSON.GeoJsonProperties\n  >[] = [];\n  const bbox = turf.bbox(fc);\n  let n = ori;\n  let flag = false;\n  let joker = 0;\n\n  while (!flag) {\n    const thePoints = turf.randomPoint(n, {\n      bbox,\n    });\n    joker += 1;\n    // @ts-expect-error TODO: fix this\n    const ptsWithin = turf.pointsWithinPolygon(thePoints, fc);\n    for (let i = 0; i < ptsWithin.features.length; i += 1) {\n      const feature = ptsWithin.features[i];\n      if (feature !== undefined && feature.geometry.type === 'Point') {\n        randomFeatures.push(\n          feature as GeoJSON.Feature<GeoJSON.Point, GeoJSON.GeoJsonProperties>\n        );\n      }\n    }\n    if (randomFeatures.length < ori) {\n      n = ori - randomFeatures.length;\n    } else {\n      flag = true;\n    }\n    if (joker > ori * 10000) {\n      throw new Error(\n        'Your are not lucky. Ending without reaching expected number of Points with input polygon(s)'\n      );\n    }\n  }\n  return turf.featureCollection(randomFeatures);\n};\n\n/**\n * Creates random points and returns it as a FeatureCollection\n * @param  {Number} number of points to generate\n * @param  {Object} options for random [bbox|input]\n * @return FeatureCollection generated random points\n */\nexport function random(\n  n: number,\n  options: {\n    bbox?: GeoJSON.BBox;\n    features?: GeoJSON.FeatureCollection;\n    unkink?: boolean;\n  }\n): GeoJSON.FeatureCollection {\n  let points;\n  let params = { ...options };\n  if (typeof params === 'undefined') {\n    params = { unkink: true };\n  }\n  if (typeof params.unkink === 'undefined') {\n    params.unkink = true;\n  }\n\n  // console.debug('params', params);\n  if (typeof params.features !== 'undefined') {\n    points = randomPointsFromGeoJSON(n, {\n      features: params.features,\n      unkink: params.unkink,\n    });\n  } else {\n    points = randomPoints(n, params.bbox);\n  }\n\n  return points as GeoJSON.FeatureCollection<\n    GeoJSON.Geometry,\n    GeoJSON.GeoJsonProperties\n  >;\n}\n\nexport const RandomGenerator = {\n  random,\n};\n\nexport default { random };\n"],"names":["__webpack_require__","module","getter","definition","key","Object","obj","prop","Symbol","DEFAULT_NUMBER","randomPoints","n","bbox","count","turf","randomPointsFromGeoJSON","input","features","unkink","fc","ori","randomFeatures","flag","joker","thePoints","ptsWithin","i","feature","undefined","Error","random","options","points","params","RandomGenerator"],"mappings":";;;IACAA,oBAAoB,CAAC,GAAG,CAACC;QACxB,IAAIC,SAASD,UAAUA,OAAO,UAAU,GACvC,IAAOA,MAAM,CAAC,UAAU,GACxB,IAAOA;QACRD,oBAAoB,CAAC,CAACE,QAAQ;YAAE,GAAGA;QAAO;QAC1C,OAAOA;IACR;;;ICPAF,oBAAoB,CAAC,GAAG,CAAC,UAASG;QACjC,IAAI,IAAIC,OAAOD,WACR,IAAGH,oBAAoB,CAAC,CAACG,YAAYC,QAAQ,CAACJ,oBAAoB,CAAC,CAAC,UAASI,MACzEC,OAAO,cAAc,CAAC,UAASD,KAAK;YAAE,YAAY;YAAM,KAAKD,UAAU,CAACC,IAAI;QAAC;IAGzF;;;ICNAJ,oBAAoB,CAAC,GAAG,CAACM,KAAKC,OAAUF,OAAO,SAAS,CAAC,cAAc,CAAC,IAAI,CAACC,KAAKC;;;ICClFP,oBAAoB,CAAC,GAAG,CAAC;QACxB,IAAG,AAAkB,eAAlB,OAAOQ,UAA0BA,OAAO,WAAW,EACrDH,OAAO,cAAc,CAAC,UAASG,OAAO,WAAW,EAAE;YAAE,OAAO;QAAS;QAEtEH,OAAO,cAAc,CAAC,UAAS,cAAc;YAAE,OAAO;QAAK;IAC5D;;;;;;;;;;;ACJA,MAAMI,iBAAiB;AAEvB,MAAMC,eAAe,CAACC,GAAWC;IAC/B,MAAMC,QAAQF,KAAKF;IACnB,OAAOK,4BAAAA,WAAgB,CAACD,OAAO;QAC7BD;IACF;AACF;AAEA,MAAMG,0BAA0B,CAC9BC,OACA,EAAEC,QAAQ,EAAEC,MAAM,EAA4D;IAE9E,IAAIC;IAGFA,KAFED,SAEGJ,4BAAAA,aAAkB,CAACG,YAEnBA;IAGP,MAAMG,MAAMJ,SAASP;IACrB,MAAMY,iBAGA,EAAE;IACR,MAAMT,OAAOE,4BAAAA,IAAS,CAACK;IACvB,IAAIR,IAAIS;IACR,IAAIE,OAAO;IACX,IAAIC,QAAQ;IAEZ,MAAO,CAACD,KAAM;QACZ,MAAME,YAAYV,4BAAAA,WAAgB,CAACH,GAAG;YACpCC;QACF;QACAW,SAAS;QAET,MAAME,YAAYX,4BAAAA,mBAAwB,CAACU,WAAWL;QACtD,IAAK,IAAIO,IAAI,GAAGA,IAAID,UAAU,QAAQ,CAAC,MAAM,EAAEC,KAAK,EAAG;YACrD,MAAMC,UAAUF,UAAU,QAAQ,CAACC,EAAE;YACrC,IAAIC,AAAYC,WAAZD,WAAyBA,AAA0B,YAA1BA,QAAQ,QAAQ,CAAC,IAAI,EAChDN,eAAe,IAAI,CACjBM;QAGN;QACA,IAAIN,eAAe,MAAM,GAAGD,KAC1BT,IAAIS,MAAMC,eAAe,MAAM;aAE/BC,OAAO;QAET,IAAIC,QAAQH,AAAM,QAANA,KACV,MAAM,IAAIS,MACR;IAGN;IACA,OAAOf,4BAAAA,iBAAsB,CAACO;AAChC;AAQO,SAASS,OACdnB,CAAS,EACToB,OAIC;IAED,IAAIC;IACJ,IAAIC,SAAS;QAAE,GAAGF,OAAO;IAAC;IAC1B,IAAI,AAAkB,WAAXE,QACTA,SAAS;QAAE,QAAQ;IAAK;IAE1B,IAAI,AAAyB,WAAlBA,OAAO,MAAM,EACtBA,OAAO,MAAM,GAAG;IAKhBD,SADE,AAA2B,WAApBC,OAAO,QAAQ,GACflB,wBAAwBJ,GAAG;QAClC,UAAUsB,OAAO,QAAQ;QACzB,QAAQA,OAAO,MAAM;IACvB,KAESvB,aAAaC,GAAGsB,OAAO,IAAI;IAGtC,OAAOD;AAIT;AAEO,MAAME,kBAAkB;IAC7BJ;AACF;AAEA,sBAAe;IAAEA;AAAO"}